# Parser_KPI_Giveout_OzonScript

Скрипт для автоматического парсинга данных о выдачах из ERP-системы ОЗОН.

## Функциональность

- Парсинг веб-страницы ОЗОН для получения данных о выдачах
- Поддержка фильтрации по дате
- Извлечение главной цифры "Всего: N" (количество выданных посылок)
- Сохранение данных в формате JSON
- Совместимость с системой отчетов

## Использование

```bash
# Запуск с текущей датой
python Parser_KPI_Giveout_OzonScript.py --detailed_logs

# Запуск с указанной датой
python Parser_KPI_Giveout_OzonScript.py --date 2026-01-06 --detailed_logs
```

## Параметры

- `--detailed_logs` - включить детализированные логи
- `--date DATE` - дата для парсинга в формате YYYY-MM-DD (по умолчанию - сегодня)

## Выходные данные

Скрипт создает JSON-файл с данными о выдачах в директории `reports/json/` с именем в формате `ozon_giveout_report_{pvz}_{date}.json`.

## Архитектура

Скрипт следует унифицированной архитектуре проекта:
- Использует базовый класс `BaseOzonParser`
- Совместим с системой `load_reports_data`
- Использует конфигурацию из `Parser_KPI_Giveout_OzonScript_config.py`
- Поддерживает интеграцию с Google Sheets и системой уведомлений

## Особенности реализации

- Формирование URL осуществляется по шаблону из конфигурации (`ERP_URL_TEMPLATE`)
- Фильтрация по дате реализована через шаблоны (`DATE_FILTER_TEMPLATE`, `DATE_FORMAT`)
- Нет хардкода формирования URL в скрипте - все параметры определены в конфигурации
- При изменении формата URL в ERP достаточно обновить шаблоны в конфигурационном файле