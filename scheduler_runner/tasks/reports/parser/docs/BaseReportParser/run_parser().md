# Метод `run_parser()` (BaseReportParser)

## Версия
**0.0.1**

## Описание
Метод `run_parser()` переопределяет метод родительского класса BaseParser для добавления специфичной логики обработки отчетов. Метод реализует обновленный алгоритм работы, поддерживающий только мульти-шаговую обработку данных.

## Сигнатура
```python
def run_parser(
    self,
    save_to_file: bool = True,
    output_format: str = 'json'
) -> Dict[str, Any]
```

## Параметры
- **save_to_file** (`bool`, optional): Флаг, указывающий, нужно ли сохранить результат в файл. По умолчанию True.
- **output_format** (`str`, optional): Формат вывода данных ('json', 'csv', 'xml' и т.д.). По умолчанию 'json'.

## Возвращаемое значение
- **Dict[str, Any]**: Словарь с извлеченными данными отчета

## Исключения
- **Exception**: Возникает в случае ошибки при выполнении любого этапа парсинга

## Алгоритм работы
1. Настройка браузера с помощью метода `setup_browser()`
2. Вход в систему с помощью метода `login()`
3. Выполнение мульти-шаговой обработки с помощью метода `_execute_multi_step_processing()`
   - Требуется наличие конфигурации `multi_step_config` с указанием шагов
4. Сохранение отчета в файл (если `save_to_file` = True) с помощью метода `save_report()`
5. Выход из системы с помощью метода `logout()`
6. Закрытие браузера с помощью метода `close_browser()` в блоке finally

## Особенности
- Метод переопределяет реализацию из базового класса BaseParser
- Поддерживает только мульти-шаговую обработку данных
- Требует наличие конфигурации `multi_step_config` с указанием шагов
- Автоматически сохраняет результат в файл (если не указано иное)
- В случае ошибки на любом этапе выбрасывается исключение
- Закрытие браузера происходит всегда, даже при возникновении исключения
- Может включать задержку перед закрытием браузера (настраивается через конфигурацию `BROWSER_CLOSE_DELAY`)