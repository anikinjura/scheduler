# Метод `get_common_report_info()`

## Версия
**0.0.1**

## Описание
Метод `get_common_report_info()` предоставляет унифицированный способ получения общей информации отчета, такой как информация о местоположении, времени извлечения данных, URL источника и дата выполнения.

## Назначение
Метод используется в рамках мульти-шаговой обработки для автоматического добавления общей информации в результаты отчета. Он позволяет централизованно управлять набором общих полей, которые должны присутствовать во всех отчетах.

## Структура возвращаемых данных
Метод возвращает словарь со следующими специальными ключами:

- `__LOCATION_INFO__` - информация о местоположении/ПВЗ (получается через `get_current_pvz()`)
- `__EXTRACTION_TIMESTAMP__` - время извлечения данных (генерируется через `_get_current_timestamp()`)
- `__SOURCE_URL__` - URL источника данных (берется из `config['target_url']` или текущего URL драйвера, или как общий префикс всех `__STEP_SOURCE_URL__` из результатов шагов)
- `__EXECUTION_DATE__` - дата выполнения (берется из `config['execution_date']`)

## Изменения в версии 0.0.1
- Добавлена поддержка параметра `all_step_results` для определения `__SOURCE_URL__` как общего префикса всех `__STEP_SOURCE_URL__` из результатов шагов
- При наличии `all_step_results` метод извлекает все `__STEP_SOURCE_URL__` из результатов шагов и формирует `__SOURCE_URL__` как общий префикс этих URL с помощью метода `_get_common_url_prefix()`

## Параметры
- `all_step_results` - результаты всех шагов мульти-шаговой обработки (опционально)
                Если переданы, используется для определения `__SOURCE_URL__` как общего префикса
                всех `__STEP_SOURCE_URL__` из результатов шагов

## Использование в мульти-шаговой обработке
В контексте мульти-шаговой обработки, метод используется в `_combine_step_results()` для:
1. Получения общей информации отчета
2. Объединения общей информации с результатами отдельных шагов
3. Замены специальных плейсхолдеров в структуре результата (например, `{__LOCATION_INFO__}`)

## Пример использования
```python
# В контексте парсера
common_info = parser.get_common_report_info()

# При наличии результатов шагов
all_step_results = {...}  # результаты всех шагов
common_info = parser.get_common_report_info(all_step_results)
```