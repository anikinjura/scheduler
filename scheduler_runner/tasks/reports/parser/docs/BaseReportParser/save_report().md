# Метод `save_report()`

## Версия
**0.0.1**

## Описание
Метод `save_report()` сохраняет отчет в файл в указанном формате. Метод форматирует данные отчета и записывает их в файл с использованием настраиваемого имени и пути.

## Сигнатура
```python
def save_report(
    self,
    data: Dict[str, Any],
    output_format: str = 'json',
    custom_filename: Optional[str] = None,
    custom_dir: Optional[str] = None,
    encoding: str = 'utf-8'
) -> str
```

## Параметры
- **data** (`Dict[str, Any]`): Данные отчета для сохранения
- **output_format** (`str`, optional): Формат вывода ('json', 'csv', 'xml', 'txt'). По умолчанию 'json'
- **custom_filename** (`Optional[str]`, optional): Пользовательское имя файла (без расширения). Если не указано, используется шаблон из конфигурации
- **custom_dir** (`Optional[str]`, optional): Пользовательская директория для сохранения. Если не указана, используется директория из конфигурации
- **encoding** (`str`, optional): Кодировка файла. По умолчанию 'utf-8'

## Возвращаемое значение
Путь к сохраненному файлу

## Изменения в версии 0.0.1
- Метод не изменен, но используется для сохранения данных отчета, которые содержат `__SOURCE_URL__`
- `__SOURCE_URL__` формируется как общий префикс всех `__STEP_SOURCE_URL__` из результатов шагов с помощью метода `_get_common_url_prefix()`
- Данные отчета, содержащие `__SOURCE_URL__`, сохраняются этим методом

## Примеры использования
```python
# Сохранение данных отчета в JSON
data = {
    "source_url": "https://turbo-pvz.ozon.ru",
    "summary": {
        "giveout": 238,
        "direct_flow_total": 12
    }
}

file_path = parser.save_report(data, 'json')
print(f"Отчет сохранен в {file_path}")
```

## Особенности реализации
- Метод сохраняет данные отчета, которые могут содержать `__SOURCE_URL__`
- `__SOURCE_URL__` формируется как общий префикс всех `__STEP_SOURCE_URL__` из результатов шагов с помощью метода `_get_common_url_prefix()`
- Использует метод `format_report_output()` для форматирования данных перед сохранением
- Поддерживает настраиваемые имена файлов и директории
- Использует кодировку UTF-8 по умолчанию