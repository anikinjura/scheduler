# Метод `_handle_nested_processing()`

## Версия
**0.0.1**

## Описание
Метод `_handle_nested_processing()` реализует обработку вложенных сценариев, когда для каждого идентификатора из табличных данных необходимо выполнить дополнительные запросы и извлечь данные из соответствующих страниц. Метод формирует URL для каждого идентификатора на основе шаблона, временно обновляет конфигурацию, выполняет навигацию и извлекает данные с использованием заданной конфигурации извлечения.

## Сигнатура
```python
def _handle_nested_processing(self, nested_config, identifiers)
```

## Параметры
- **nested_config** (`dict`): Конфигурация вложенной обработки, содержащая:
  - **enabled** (`bool`): Флаг включения вложенной обработки
  - **base_url_template** (`str`): Шаблон URL для вложенных вызовов с плейсхолдерами
  - **filter_template** (`str`): Шаблон фильтра для вложенных вызовов
  - **data_type_filter_template** (`str`): Шаблон фильтра по типу данных
  - **data_extraction** (`dict`): Параметры извлечения данных из вложенных вызовов
- **identifiers** (`list`): Список идентификаторов для обработки

## Возвращаемое значение
Список результатов обработки каждого идентификатора, содержащих извлеченные значения и URL источника

## Изменения в версии 0.0.1
- Метод используется в `_handle_table_nested_extraction()` для вложенной обработки
- Результаты вложенной обработки могут быть частью результатов шагов, которые содержат `__STEP_SOURCE_URL__`
- `__STEP_SOURCE_URL__` из всех шагов используется для формирования `__SOURCE_URL__` как общего префикса всех URL с помощью метода `_get_common_url_prefix()`

## Что происходит в методе:
1. **Инициализация результатов**:
   - Создается пустой список `results` для хранения результатов обработки каждого идентификатора

2. **Обработка каждого идентификатора**:
   - Для каждого идентификатора из списка `identifiers` выполняется следующая логика:
   - Обновляется URL с использованием шаблона из `base_url_template`
   - Временно сохраняются оригинальные параметры конфигурации
   - Обновляется конфигурация для вложенной обработки:
     - `base_url` - новый URL с подставленным идентификатором
     - `filter_template` - шаблон фильтра для вложенных вызовов
     - `data_type_filter_template` - шаблон фильтра по типу данных

3. **Выполнение вложенной обработки**:
   - Выполняется навигация к новому URL с помощью `self.navigate_to_target()`
   - Извлекаются данные с использованием конфигурации извлечения из `nested_config`
   - Используется метод `_extract_value_by_config()` для извлечения значения

4. **Формирование результата**:
   - Для каждого идентификатора создается запись с полями:
     - `identifier` - идентификатор
     - `value` - извлеченное значение
     - `url` - URL, с которого были извлечены данные

## Особенности реализации
- Метод вызывается из `_handle_table_nested_extraction()` для вложенной обработки
- Результаты вложенной обработки могут быть частью результатов шагов, которые содержат `__STEP_SOURCE_URL__`
- `__STEP_SOURCE_URL__` из всех шагов используется для формирования `__SOURCE_URL__` как общего префикса всех URL с помощью метода `_get_common_url_prefix()`