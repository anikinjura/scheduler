# Метод `_check_and_close_overlay()`

## Версия
**0.0.2**

## Описание
Метод `_check_and_close_overlay()` реализует логику проверки наличия информационного оверлея (модального окна) на странице и его закрытия. Метод используется для автоматического закрытия информационных окон Ozon, которые могут блокировать взаимодействие с элементами страницы.

## Сигнатура
```python
def _check_and_close_overlay(self) -> bool
```

## Возвращаемое значение
- `True` — если оверлея нет на странице или он успешно закрыт
- `False` — если не удалось закрыть оверлей после всех попыток

## Конфигурация
Метод использует параметры из конфигурации `overlay_config`:

```python
"overlay_config": {
    "enabled": True,  # Флаг включения проверки оверлея
    "overlay_selector": "//div[contains(@class, 'ozi__dialog__dialog__C2BB8')]",  # Селектор оверлея
    "close_button_selector": "//button[contains(@class, 'ozi__window__closeIcon__-pkPv')]",  # Селектор кнопки закрытия
    "wait_timeout": 5,  # Таймаут ожидания появления оверлея (секунды)
    "retry_count": 3,  # Количество попыток закрытия
    "retry_delay": 1   # Задержка между попытками (секунды)
}
```

## Алгоритм работы

1. **Проверка включения**: Если `enabled=False`, метод сразу возвращает `True`
2. **Проверка наличия оверлея**: Вызывает `_is_overlay_present()` с заданным таймаутом
3. **Если оверлей обнаружен**:
   - Пытается закрыть его, вызывая `_click_close_button()`
   - Проверяет, исчез ли оверлей после клика
   - Повторяет попытку до `retry_count` раз с задержкой `retry_delay`
4. **Если оверлей не обнаружен**: Возвращает `True`

## Логирование

Метод ведёт подробное логирование:
- `TRACE` — вход в метод
- `DEBUG` — проверка конфигурации, параметры селекторов, процесс попыток
- `INFO` — обнаружение оверлея, успешное закрытие
- `WARNING` — неудачные попытки закрытия, оверлей всё ещё присутствует
- `ERROR` — исчерпаны все попытки закрытия

## Пример использования

```python
# В методе ensure_correct_pvz()
if self.logger:
    self.logger.debug("Проверка наличия оверлея перед получением ПВЗ")
if not self._check_and_close_overlay():
    if self.logger:
        self.logger.warning("Не удалось закрыть оверлей, продолжаем работу")

# Продолжаем работу со страницей...
current_pvz = self.get_current_pvz()
```

## Зависимости
- `_is_overlay_present()` — проверка наличия оверлея на странице
- `_click_close_button()` — клик по кнопке закрытия

## Изменения в версии 0.0.2
- Добавлена поддержка конфигурации `overlay_config`
- Добавлена возможность повторных попыток закрытия
- Добавлена проверка исчезновения оверлея после клика
